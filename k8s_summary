Kubernetes是一个容器编排引擎

Kubernetes是master worker的工作模式，master上有apiserver组件，etcd master组件以及scheduler等组件，woker上则是有kubelet组件（负责创建容器通过cri 创建容器, csi 创建storage创建存储相关,cni创建网络相关）, cri 这边是可以是调用docker来实现，也可以是containerd。

Kubenetes 有deployment资源以及对应的controller来让声明式的yaml在loop循环中达到目标request，Deployment 为 Pod（k8s最小资源调度单位） 和 ReplicaSet(管理pod的副本数) 提供声明式的更新能力。


Pod.yaml 包含version kind metadata 以及spec(包含镜像以及port信息)
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
  - name: nginx
    image: nginx:1.14.2
    ports:
    - containerPort: 80
创建命令是kubectl apply -f pod.yaml
查看命令是 kubectl get pod -n default 默认创建在default ns下也可以在apply -f 之后加上 -n nsname指定namespace。

deployment.yaml 声明replicaset 以及pod的信息
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec：
  terminationGracePeriodSeconds: 60 #优雅退出，就是容器有问题会有缓冲时间处理完
  replicas: 3 #定义副本数
  selector: #选择器选择相同label的pod来进行管理
    matchLabels: 
      app: nginx
  template: #pod模版 pod打上label
    metadata: #.metadata.labels 
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
        
获取 Deployment 的更多信息
kubectl describe deployments
